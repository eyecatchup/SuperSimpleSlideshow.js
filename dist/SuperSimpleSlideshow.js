// Copyright 2013 Stephan Schmitz <eyecatchup@gmail.com>. All rights reserved.
// URL: https://github.com/eyecatchup/SuperSimpleSlideshow.js
// Use of this source code is governed by the MIT license that can be found in
// the LICENSE file.

/*jshint ass: true, forin:true, noarg:true, noempty:true, nomen: true, unparam: true, eqeqeq:true, bitwise:true, strict:true, undef:false, curly:true, browser:true, es5:true, indent:4, maxerr:500, white:true*/
/*global SuperSimpleSlideshow:true, window:true*/
var SuperSimpleSlideshow=function(){function d(a){try{return window.document.getElementById(a)}catch(b){}}function f(a){b=this;this.__init__(h,k,a);window.document.addEventListener("keydown",this.bindHotkeys,!1)}var b=this,g=-1,h={oImagesNodeList:null,nImgCnt:0,nSlideCurrIndex:0},k={bAutostart:!1,nSlideInterval:3E3,sSliderNodeId:"slideshow",sCssTransition:"fadey"};f.prototype={__init__:function(a,b,c){this.slider=a;this.opts=b;"undefined"!==typeof c&&(c.autostart&&this.setAutostart(c.autostart),c.interval&&
this.setSliderInterval(c.interval),c.sliderId&&this.setSliderNodeId(c.sliderId));this.setSlideshowNodeList();!0===this.getAutostart()&&this.start()},start:function(){var a=this.getSlideshowNodeList(),e=this.getSliderIteration();if("undefined"===typeof a)return!1;this.setState(2);a[e].style.webkitAnimation=this.opts.sCssTransition+" "+this.getSliderInterval()+"ms";a[e].style.animation=this.opts.sCssTransition+" "+this.getSliderInterval()+"ms";window.setInterval(function(){a[b.slider.nSlideCurrIndex].removeAttribute("style");
2==b.getState()&&(b.slider.nSlideCurrIndex==b.slider.nImgCnt-1?b.setSliderIteration(0):b.slider.nSlideCurrIndex++,a[b.slider.nSlideCurrIndex].style.webkitAnimation=b.opts.sCssTransition+" "+b.getSliderInterval()+"ms",a[b.slider.nSlideCurrIndex].style.animation=b.opts.sCssTransition+" "+b.getSliderInterval()+"ms")},this.getSliderInterval())},pause:function(){return this.setState(3)},getState:function(){return g},setState:function(a){if(1===a||2===a||3===a){var b="State changed: ";1===a?b+="INITED":
2===a?b+="PLAYING":3===a&&(b+="STOPPED");console.log(b);return g=a,!0}return!1},getAutostart:function(){return this.opts.bAutostart},setAutostart:function(a){!0!==a&&!1!==a||(this.opts.bAutostart=a)},getSliderInterval:function(){return this.opts.nSlideInterval},setSliderInterval:function(a){isFinite(a)&&(this.opts.nSlideInterval=a)},getSliderIteration:function(){return this.slider.nSlideCurrIndex},setSliderIteration:function(a){this.slider.nSlideCurrIndex=a},addSliderIteration:function(){this.slider.nSlideCurrIndex+=
1},resetSliderIteration:function(){this.slider.nSlideCurrIndex=0},getSliderNodeId:function(){return this.opts.sSliderNodeId},setSliderNodeId:function(a){"string"===typeof a&&0<a.length&&(this.opts.sSliderNodeId=a)},getSlideshowNodeList:function(){return this.slider.oImagesNodeList},setSlideshowNodeList:function(){var a=this.getSliderNodeId();if(d(a)&&d(a).children&&d(a).children.length)this.slider.oImagesNodeList=d(a).children,this.slider.nImgCnt=d(a).children.length,this.resetSliderIteration(),this.setState(1);
else return!1},goFullscreen:function(){var a=d(this.getSliderNodeId());if(a.requestFullscreen)return a.requestFullscreen();if(a.webkitRequestFullscreen)return a.webkitRequestFullscreen();if(a.mozRequestFullScreen)return a.mozRequestFullScreen()},bindHotkeys:function(a){a=a||window.event;switch(a.keyCode){case 32:!a.cancelable||a.preventDefault();console.log("space key pressed.");if(1==b.getState()||3==b.getState())return console.log("was NOT playing.. starting."),b.start();if(2==b.getState())return console.log("was playing.. pausing."),
b.pause();break;case 37:!a.cancelable||a.preventDefault();console.log("left > prev()");break;case 39:!a.cancelable||a.preventDefault();console.log("right > next()");break;case 38:!a.cancelable||a.preventDefault();console.log("up > zoomIn()");break;case 40:!a.cancelable||a.preventDefault();console.log("down > zoomOut()");break;case 187:!a.cancelable||a.preventDefault();console.log("+ > zoomIn()");break;case 189:!a.cancelable||a.preventDefault();console.log("- > zoomOut()");break;case 70:return!a.cancelable||
a.preventDefault(),console.log("f > goFullscreen()"),b.goFullscreen();default:!a.cancelable||a.preventDefault()}}};return window.SuperSimpleSlideshow=f}();